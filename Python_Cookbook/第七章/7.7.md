## 匿名函数变量的获得

**问题**

你要用 lambda 定义一个匿名函数，但是你也需要在定义的同时获得这些变量的值。

**解决方案**

想想一下下面的代码：

    >>> x = 10
    >>> a = lambda y: x + y
    >>> x = 20
    >>> b = lambda y: x + y
    >>> 
    
你会有疑问，a(10) 和 b(10) 是什么值？如果你认为是 20 和 30，那么你错了：

    >>> a(10)
    30
    >>> b(10)
    30
    >>> 
    
问题在于，lambda 函数的变量 x 的值是运行时编译，并不是定义的时候编译。因此，x 在 lambda 表达式里德值是运行时的值。比如

    >>> x = 15
    >>> a(10)
    25
    >>> x = 3
    >>> a(10)
    13
    >>> 
    
如果你想要匿名函数获得一个定义好的值，可以把它作为默认值进行传入，就像这样：

    >>> x = 10
    >>> lambda y, x-x: x + y
    SyntaxError: invalid syntax
    >>> a = lambda y, x=x: x + y
    >>> b = lambda y, x=x: x + y
    >>> a(10)
    20
    >>> b(10)
    20
    >>> 
    
**讨论**

这个问题的解决让我们的 lambda 函数变得聪明了一些。比如，用循环和 lambda 函数创建一个列表，让函数在定义的时候就记住这个变量。

    >>> funcs = [lambda x: x+n for n in range(5)]
    >>> for i in funcs:
        print(i(0))


    4
    4
    4
    4
    4
    >>> 

注意这个函数指会记住迭代后的最后一个值，因为只有在用的时候才会开始编译这个值。现在我们对比一下下面的写法：

    >>> funcs = [lambda x, n=n: x+n for n in range(5)]
    >>> for i in funcs:
        print(i(0))


    0
    1
    2
    3
    4
    >>> 
    
正如你所见，函数现在或获得了定义的时候的 n 的值。

